<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prelims 2025 Master Tracker</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #2a2a72;
      --secondary-color: #009ffd;
      --accent-color: #ff3c00;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      transition: background 0.5s ease;
    }

    .neumorphic {
      background: #f0f0f3;
      border-radius: 20px;
      box-shadow: 10px 10px 21px #d3d3d6,
                  -10px -10px 21px #ffffff;
      transition: transform 0.3s ease;
    }

    .password-card, .content-card {
      max-width: 800px;
      margin: 2rem auto;
      padding: 2rem;
    }

    .password-card:hover {
      transform: translateY(-5px);
    }

    /* Modern Floating Countdown */
    #countdown {
      position: absolute;
      top: 20%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2.5rem;
      font-weight: 600;
      color: var(--primary-color);
      background: rgba(255, 255, 255, 0.8);
      border-radius: 15px;
      padding: 2rem 3rem;
      z-index: 1000;
      text-align: center;
    }

    .motivational-quote {
      font-style: italic;
      color: var(--primary-color);
      border-left: 4px solid var(--secondary-color);
      padding-left: 1rem;
      margin: 2rem 0;
      background: #ffffff;
      border-radius: 12px;
      padding: 1.5rem;
    }

    .schedule-table {
      background: #ffffff;
      border-radius: 15px;
      overflow: hidden;
    }

    .highlight-today {
      background-color: #e3f2fd !important;
      font-weight: 600;
    }

    .progress-bar-custom {
      height: 8px;
      border-radius: 4px;
      background-color: #e0e0e0;
    }

    .progress-custom {
      height: 100%;
      background: linear-gradient(90deg, var(--secondary-color), var(--primary-color));
      transition: width 0.5s ease;
    }

    @media (max-width: 768px) {
      #countdown {
        font-size: 1.8rem;
        padding: 1.5rem 2rem;
      }
    }
  </style>
</head>
<body>
  <!-- Password Section -->
  <div id="loginForm" class="password-card neumorphic">
    <div class="text-center mb-4">
      <i class="fas fa-lock fa-3x text-primary mb-3"></i>
      <h2 class="fw-bold">Prelims Preparation Portal</h2>
      <p class="text-muted">Enter your access code to continue</p>
    </div>
    <div class="input-group mb-3">
      <input type="password" id="password" class="form-control form-control-lg" 
             placeholder="Enter Password" style="border-radius: 12px;">
      <button class="btn btn-primary btn-lg" onclick="checkPassword()" 
              style="border-radius: 12px; margin-left: 1rem;">
        Unlock <i class="fas fa-arrow-right"></i>
      </button>
    </div>
    <div class="text-center mt-3">
      <small class="text-muted">"Success is the sum of small efforts, repeated day in and day out."</small>
    </div>
  </div>

  <!-- Main Content -->
  <div id="content" style="display: none; padding-top: 5rem;">
    <!-- Floating Countdown -->
    <div id="countdown" class="neumorphic"></div>

    <div class="container">
      <!-- Header Section -->
      <div class="text-center mb-5" style="margin-top: 300px;">
        <h1 class="display-4 fw-bold mb-3">UPSC Prelims 2025 Master Tracker</h1>
      </div>

      <!-- Progress Bar -->
      <div class="progress-bar-custom mb-5 neumorphic">
        <div id="timeProgress" class="progress-custom"></div>
      </div>

      <!-- Motivational Quote -->
      <div id="motivationalQuote" class="motivational-quote neumorphic">
        Loading motivational quote...
      </div>

      <!-- Schedule Table -->
      <div class="schedule-table shadow-lg mb-5">
        <div class="p-3 bg-primary text-white">
          <h4 class="mb-0"><i class="fas fa-calendar-alt me-2"></i>Study Plan Timeline</h4>
        </div>
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead class="table-light">
              <tr>
                <th>Date</th>
                <th>Focus Area</th>
                <th>Test/Activity</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="scheduleBody">
              <!-- Schedule data will be injected dynamically -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="row mt-5">
        <div class="col-md-4 mb-3">
          <div class="neumorphic p-3 text-center">
            <h5 class="text-muted">Days Remaining</h5>
            <h2 id="daysRemaining" class="fw-bold text-primary">-</h2>
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <div class="neumorphic p-3 text-center">
            <h5 class="text-muted">Upcoming Test</h5>
            <h2 id="nextTest" class="fw-bold text-primary">-</h2>
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <div class="neumorphic p-3 text-center">
            <h5 class="text-muted">Current Focus</h5>
            <h2 id="currentFocus" class="fw-bold text-primary">-</h2>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Font Awesome (for icons) -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script>
    // Check if user is already logged in using localStorage
    window.addEventListener('load', () => {
      if (localStorage.getItem('loggedIn') === 'true') {
        showContent();
      }
    });

    // Enhanced Password Check with Enter Key Support
    document.getElementById('password').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') checkPassword();
    });

    function checkPassword() {
      const pwd = document.getElementById('password').value;
      if (pwd === 'kishu') {
        localStorage.setItem('loggedIn', 'true');
        // Animate and show content
        document.getElementById('loginForm').classList.add('animate__fadeOutUp');
        setTimeout(() => {
          showContent();
        }, 500);
      } else {
        showAlert('Incorrect password! Please try again.');
      }
    }

    function showAlert(message) {
      const alertDiv = document.createElement('div');
      alertDiv.className = 'alert alert-danger mt-3';
      alertDiv.textContent = message;
      document.querySelector('.password-card').appendChild(alertDiv);
      setTimeout(() => alertDiv.remove(), 3000);
    }

    function showContent() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('content').style.display = 'block';
      startCountdown();
      initSchedule();
      showRandomQuote();
    }

    // Dynamic Motivational Quote Fetching using two APIs
    function showRandomQuote() {
      const quoteContainer = document.getElementById('motivationalQuote');
      // First try API Ninjas using your provided key
      fetch('https://api.api-ninjas.com/v1/quotes?category=inspirational', {
        headers: { 'X-Api-Key': 'UoZQOaGr/NlucBsGLgP/Zg==TPL2dMzEFTHRkWj8' }
      })
      .then(response => {
        if (!response.ok) throw new Error("API Ninjas request failed");
        return response.json();
      })
      .then(data => {
        if (data && data.length > 0) {
          let quote = data[0];
          quoteContainer.textContent = `${quote.quote} - ${quote.author}`;
        } else {
          throw new Error("No quote found");
        }
      })
      .catch(error => {
        // Fallback to The Quotes Hub API
        fetch('https://thequoteshub.com/api/quotes/random')
          .then(response => response.json())
          .then(data => {
            if (data && data.quote) {
              quoteContainer.textContent = `${data.quote} - ${data.author}`;
            } else {
              fallbackLocalQuotes(quoteContainer);
            }
          })
          .catch(err => fallbackLocalQuotes(quoteContainer));
      });
    }

    function fallbackLocalQuotes(container) {
      const quotes = [
        "The secret of getting ahead is getting started. - Mark Twain",
        "Don't count the days, make the days count. - Muhammad Ali",
        "Success is no accident. It is hard work, perseverance, learning, sacrifice and most of all, love of what you are doing. - PelÃ©",
        "The future belongs to those who believe in the beauty of their dreams. - Eleanor Roosevelt",
        "You are never too old to set another goal or to dream a new dream. - C.S. Lewis",
        "The only limit to our realization of tomorrow will be our doubts of today. - Franklin D. Roosevelt"
      ];
      container.textContent = quotes[Math.floor(Math.random() * quotes.length)];
    }

    // Enhanced Countdown with Floating Design and Progress Bar
    function startCountdown() {
      const countDownDate = new Date("May 25, 2025 08:00:00").getTime();
      const totalTime = countDownDate - new Date("Jan 1, 2024 00:00:00").getTime();
      
      const updateTimer = setInterval(() => {
        const now = new Date().getTime();
        const distance = countDownDate - now;
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // Update Countdown Display
        document.getElementById("countdown").innerHTML = `
          <div class="d-flex justify-content-around">
            <div>${days}<br><small>Days</small></div>
            <div>${hours}<br><small>Hours</small></div>
            <div>${minutes}<br><small>Minutes</small></div>
            <div>${seconds}<br><small>Seconds</small></div>
          </div>
        `;

        // Update Progress Bar
        const elapsed = now - new Date("Jan 1, 2024 00:00:00").getTime();
        const progress = (elapsed / totalTime) * 100;
        document.getElementById('timeProgress').style.width = `${Math.min(progress, 100)}%`;

        if (distance < 0) {
          clearInterval(updateTimer);
          document.getElementById("countdown").innerHTML = "Prelims 2025 Has Begun!";
        }
      }, 1000);
    }

    // Schedule Initialization (placeholder for further enhancements)
    function initSchedule() {
      const scheduleBody = document.getElementById('scheduleBody');
      // Example schedule data
      const schedule = [
        { date: "2024-12-01", focus: "General Studies", activity: "Mock Test", status: "Pending" },
        { date: "2024-12-15", focus: "Current Affairs", activity: "Quiz", status: "Pending" },
        { date: "2025-01-10", focus: "Optional Subject", activity: "Revision", status: "Pending" }
      ];
      schedule.forEach(item => {
        const tr = document.createElement('tr');
        const today = new Date().toISOString().split('T')[0];
        if (item.date === today) tr.classList.add('highlight-today');
        tr.innerHTML = `
          <td>${item.date}</td>
          <td>${item.focus}</td>
          <td>${item.activity}</td>
          <td>${item.status}</td>
        `;
        scheduleBody.appendChild(tr);
      });

      // Quick Stats example update (could be dynamically computed)
      document.getElementById('daysRemaining').textContent = Math.max(0, Math.floor((new Date("May 25, 2025 08:00:00") - new Date()) / (1000*60*60*24)));
      document.getElementById('nextTest').textContent = schedule[0].activity;
      document.getElementById('currentFocus').textContent = schedule[0].focus;
    }
  </script>
</body>
</html>
